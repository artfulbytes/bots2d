<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bots2D: Microcontroller Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bots2D
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classMicrocontroller-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Microcontroller Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="Microcontroller_8h_source.html">Microcontroller.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Microcontroller:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMicrocontroller.png" usemap="#Microcontroller_map" alt=""/>
  <map id="Microcontroller_map" name="Microcontroller_map">
<area href="classControllerComponent.html" alt="ControllerComponent" shape="rect" coords="0,56,236,80"/>
<area href="classComponent.html" alt="Component" shape="rect" coords="0,0,236,24"/>
<area href="classMicrocontrollerCBinding.html" alt="MicrocontrollerCBinding" shape="rect" coords="0,168,236,192"/>
<area href="classMicrocontrollerSumobot4WheelExample.html" alt="MicrocontrollerSumobot4WheelExample" shape="rect" coords="0,224,236,248"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMicrocontroller_1_1VoltageLine.html">VoltageLine</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aac3518f2570c97365170b1b239c639b4"><td class="memItemLeft" align="right" valign="top"><a id="aac3518f2570c97365170b1b239c639b4"></a>
typedef std::array&lt; <a class="el" href="structMicrocontroller_1_1VoltageLine.html">VoltageLine</a>, VoltageLine::Idx::Count &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>VoltageLines</b></td></tr>
<tr class="separator:aac3518f2570c97365170b1b239c639b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8ec5ee0d861d8d5aeec92d8a6c4329fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicrocontroller.html#a8ec5ee0d861d8d5aeec92d8a6c4329fe">Microcontroller</a> (VoltageLines &amp;voltageLines, unsigned int updateRateHz)</td></tr>
<tr class="separator:a8ec5ee0d861d8d5aeec92d8a6c4329fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0800cadece16c5b342f10d6076bab543"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicrocontroller.html#a0800cadece16c5b342f10d6076bab543">start</a> ()</td></tr>
<tr class="separator:a0800cadece16c5b342f10d6076bab543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a552909108ddaa6c196c837487b6e8f54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicrocontroller.html#a552909108ddaa6c196c837487b6e8f54">onFixedUpdate</a> () override final</td></tr>
<tr class="separator:a552909108ddaa6c196c837487b6e8f54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca3c6d6bc8899bac7374c934e51048b0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicrocontroller.html#aca3c6d6bc8899bac7374c934e51048b0">onKeyEvent</a> (const <a class="el" href="structEvent_1_1Key.html">Event::Key</a> &amp;keyEvent)</td></tr>
<tr class="separator:aca3c6d6bc8899bac7374c934e51048b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aced5eefa476066b04f52a9a39addbcc2"><td class="memItemLeft" align="right" valign="top"><a id="aced5eefa476066b04f52a9a39addbcc2"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>getVoltageLevel</b> (int idx)</td></tr>
<tr class="separator:aced5eefa476066b04f52a9a39addbcc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48eba1b6b8d4e2f37a96e11f49d1c1c3"><td class="memItemLeft" align="right" valign="top"><a id="a48eba1b6b8d4e2f37a96e11f49d1c1c3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setVoltageLevel</b> (int idx, float level)</td></tr>
<tr class="separator:a48eba1b6b8d4e2f37a96e11f49d1c1c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5eabe5ebe72fc8490c7dba959bec488f"><td class="memItemLeft" align="right" valign="top"><a id="a5eabe5ebe72fc8490c7dba959bec488f"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><b>get_voltage_level</b> (int idx, void *userdata)</td></tr>
<tr class="separator:a5eabe5ebe72fc8490c7dba959bec488f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab906c79ce4afbdb7dcc675b0c7ba5869"><td class="memItemLeft" align="right" valign="top"><a id="ab906c79ce4afbdb7dcc675b0c7ba5869"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>set_voltage_level</b> (int idx, float level, void *userdata)</td></tr>
<tr class="separator:ab906c79ce4afbdb7dcc675b0c7ba5869"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class for mimicking a real microcontroller.</p>
<p>The microcontroller's update loop is offloaded to a separate thread to prevent the simulator's update rate from depending on the microcontroller's update rate.</p>
<p>This class must be inherited, and inherited classes must implement microcontrollerUpdate. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a8ec5ee0d861d8d5aeec92d8a6c4329fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ec5ee0d861d8d5aeec92d8a6c4329fe">&#9670;&nbsp;</a></span>Microcontroller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Microcontroller::Microcontroller </td>
          <td>(</td>
          <td class="paramtype">Microcontroller::VoltageLines &amp;&#160;</td>
          <td class="paramname"><em>voltageLines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>updateRateHz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">voltageLines</td><td>List of voltage lines that may be connected to "electrical" objects. Users must manually keep track of which voltage lines are connected to what objects. </td></tr>
    <tr><td class="paramname">updateRateHz</td><td>How many times per second the loop should run at maximum. Note any sleep inside the controller code will of course affect the update rate. There is also no point in running it faster than the physics update rate because the voltage lines are only transferred every physics step. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a552909108ddaa6c196c837487b6e8f54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a552909108ddaa6c196c837487b6e8f54">&#9670;&nbsp;</a></span>onFixedUpdate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Microcontroller::onFixedUpdate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called every physics step (if assigned to a <a class="el" href="classScene.html">Scene</a> Object). </p>

<p>Implements <a class="el" href="classControllerComponent.html#a5165a0a65d161e6f88ae733085a00340">ControllerComponent</a>.</p>

</div>
</div>
<a id="aca3c6d6bc8899bac7374c934e51048b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca3c6d6bc8899bac7374c934e51048b0">&#9670;&nbsp;</a></span>onKeyEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Microcontroller::onKeyEvent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structEvent_1_1Key.html">Event::Key</a> &amp;&#160;</td>
          <td class="paramname"><em>keyEvent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classMicrocontroller.html">Microcontroller</a> should typically not handle key events, but don't make this method final, because it's useful to override it for debugging. </p>

<p>Implements <a class="el" href="classControllerComponent.html">ControllerComponent</a>.</p>

</div>
</div>
<a id="a0800cadece16c5b342f10d6076bab543"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0800cadece16c5b342f10d6076bab543">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Microcontroller::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Must be called to start the loop function. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/controllers/components/<a class="el" href="Microcontroller_8h_source.html">Microcontroller.h</a></li>
<li>src/controllers/components/Microcontroller.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
